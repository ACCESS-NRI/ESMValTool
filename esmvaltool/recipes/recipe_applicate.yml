documentation:
  description: |
    Recipe to evaluate the negative ice growth-ice thickness feedback

  authors:
    - mass_fr

  references:
    - gleckler08jgr

  projects:
    - applicate

datasets:
# Note that there is no way to extract specific months here, need to add times twice in extract_time
  - {dataset: HadGEM2-CC, project: CMIP5, exp: historical, ensemble: r1i1p1, start_year: 1989, end_year: 2004, }
  - {dataset: HadGEM2-ES, project: CMIP5, exp: historical, ensemble: r1i1p1, start_year: 1989, end_year: 2004, }
  # - {dataset: EC-EARTH, project: CMIP5, exp: historical, ensemble: r1i1p1, start_year: 1989, end_year: 2004, }

preprocessors:
  get_arctic:
    extract_region:
      start_longitude: 0
      end_longitude: 360
      start_latitude: 80
      end_latitude: 90

diagnostics:
  NegativeSeaIceFeedback:
    description: Computes the negative seaice feedback
    variables:
      sit:
        preprocessor: extract_region
        mip: OImon
        fx_files: [areacello]
    scripts:
      negative_seaice_feedback:
        script: seaice_feedback/negative_seaice_feedback.py
      save:
        bbox_inches: tight
        orientation: landscape
      axes_functions: &axes_functions
        set_title: Seaice negative feedback
        set_xlabel: Feedback value
        set_ylabel: P-value
        legend:
          kwargs:
            loc: center left
            bbox_to_anchor: [1.05, 0.5]
            borderaxespad: 0.0
            ncol: 2a

  # SeaIceEdge:
  #   description: Plots the sea-ice edge
  #   variables:
  #     sic:
  #       mip: OImon
  #   scripts:
  #     sea_ice_edge:
  #       script: seaice_edge/sea_ice_edge.r
  #       concentration_treshold: 15
  #       plot_all_years: True
  #       plot_climatology: True
