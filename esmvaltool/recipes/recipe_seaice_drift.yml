---

datasets:
 - {dataset: GFDL-ESM2G,  project: CMIP5,  mip: day,  exp: historical,  ensemble: r1i1p1,  start_year: 1979,  end_year: 2000}
 - {dataset: MPI-ESM-LR,  project: CMIP5,  mip: day,  exp: historical,  ensemble: r1i1p1,  start_year: 1979,  end_year: 2000}
#  - {dataset: EC-EARTH,  project: CMIP5,  mip: day,  exp: historical,  ensemble: r1i1p1,  start_year: 2000,  end_year: 2002}

preprocessors:
  extract:
    extract_region:
      start_longitude: 0
      end_longitude: 360
      start_latitude: 40
      end_latitude: 90

  extract_sispeed:
    custom_order: true
    extract_region:
      start_longitude: 0
      end_longitude: 360
      start_latitude: 40
      end_latitude: 90
    derive: true

diagnostics:
  seaice_drift:
    description: Sea-ice drift
    variables:
      sic:
        mip: SIday
        field: T2MO
        preprocessor: extract
        reference_dataset: MPI-ESM-LR
        fx_files: [areacello]
        # additional_datasets:
        #   - {dataset: osisaf, institute: eumetsat, project: OBS, type: obs, version: 1,
        #      freq_folder: daily_mean, mip: OImon, short_name: sic, tier: 2,
        #      start_year: 1950,  end_year: 1950}

      sit:
        mip: SIday
        field: T2MO
        preprocessor: extract
        reference_dataset: MPI-ESM-LR
        fx_files: [areacello]
        # additional_datasets:
        #   - {dataset: piomas, institute: psc, project: OBS, type: recon, version: 1,
        #      freq_folder: monthly_mean, mip: OImon, short_name: siv, tier: 2,
        #      start_year: 1979,  end_year: 1979}
      sispeed:
        mip: SIday
        field: T2MO
        preprocessor: extract_sispeed
        reference_dataset: MPI-ESM-LR
        derive: true
        force_derivation: false
        fx_files: [areacello]
    scripts:
      # sea_ice_drift:
      #   script: seaice_drift/seaice_drift.py
      #   title: "Python example diagnostic"
      #   latitude_treshold: 50
      sea_ice_drift_SCICEX:
        script: seaice_drift/seaice_drift.py
        title: "Python example diagnostic"
        # lon, lat tuples
        polygon:
          - [-15., 87.]
          - [-60., 86.58]
          - [-130., 80]
          - [-141., 80]
          - [-141., 70]
          - [-155., 72]
          - [175., 75.5]
          - [172., 78.5]
          - [163, 80.5]
          - [126, 78.5]
          - [110, 84.33]
          - [80, 84.42]
          - [57, 85.17]
          - [33, 83.8]
          - [8, 84.08]
        polygon_name: SCICEX

