# ESMValTool
# recipe_pcrglobwb.yml
---
documentation:
  description: |
    Recipe pre-processes ERA-Interim reanalyses files for use in the PCR-GLOBWB hydrological model.

    PCR-GLOBWB (PCRaster Global Water Balance) is a large-scale hydrological model intended for global
    to regional studies and developed at the Department of Physical Geography, Utrecht University (Netherlands).

  authors: ['aerts_jerom', 'andela_bouwe', 'drost_niels', 'camphuijsen_jaro', 'kalverla_peter']
  projects: ['ewatercycle']
  references: ['acknow_project', 'sutanudjaja2018gmd']


preprocessors:
  preprocessor: &general
    regrid:
      target_grid: 0.25x0.25
      lon_offset: true
      lat_offset: true
      scheme: linear
    extract_time:
      end_year: 2000
      end_month: 1
      end_day: 3

  daily_water:
    <<: *general
    convert_units:
      units: kg m-2 d-1
  daily_temperature:
    <<: *general
    convert_units:
      units: degC

  hourly_water:
    <<: *general
    convert_units:
      units: kg m-2 h-1
    daily_statistics:
      operator: sum

  hourly_temperature:
    <<: *general
    convert_units:
      units: degC
    daily_statistics:
      operator: mean

diagnostics:
  diagnostic_daily:
    description: PCR-GLOBWB input preprocessor for daily data
    additional_datasets:
      - {dataset: ERA-Interim, project: OBS6, tier: 3, type: reanaly, version: 1}
    variables:
      pr: &var_daily
        mip: day
        start_year: 2000
        end_year: 2000
        preprocessor: daily_water
      tas:
        <<: *var_daily
        preprocessor: daily_temperature
    scripts:
      script:
        script: hydrology/pcrglobwb.py

  diagnostic_hourly:
    description: PCR-GLOBWB  input preprocesor for hourly data
    additional_datasets:
      - {dataset: ERA5, project: OBS6, tier: 3, type: reanaly, version: 1}
    variables:
      pr: &var_hourly
        mip: E1hr
        start_year: 2000
        end_year: 2000
        preprocessor: hourly_water
      tas:
        <<: *var_hourly
        preprocessor: hourly_temperature
    scripts:
      script:
        script: hydrology/pcrglobwb.py
